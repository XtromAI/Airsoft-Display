<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="700" viewBox="0 0 1000 700">
  <style>
    .wire { stroke:#000; stroke-width:2; fill:none }
    .txt { font-family: Arial, Helvetica, sans-serif; font-size:14px; }
    .title { font-size:18px; font-weight:700 }
    .small { font-size:12px }
    .node { fill:#000 }
    .part { stroke:#000; stroke-width:1; fill:#fff }
  </style>

  <!-- Title -->
  <text x="20" y="30" class="title">Op-amp unity-gain buffer (reference)</text>
  <text x="20" y="52" class="txt small">Divider isolation for ADC: DIV_MID → op-amp buffer → ADC_IN (Pico)</text>

  <!-- Divider -->
  <text x="40" y="110" class="txt">VIN</text>
  <line x1="80" y1="100" x2="230" y2="100" class="wire" />
  <rect x="230" y="88" width="10" height="24" class="part"/>
  <text x="248" y="106" class="txt">R_TOP 2.7k</text>

  <!-- Rtop drawn as zigzag-like symbol (simplified) -->
  <line x1="80" y1="100" x2="360" y2="100" class="wire"/>

  <!-- Divider node -->
  <circle cx="360" cy="100" r="4" class="node"/>
  <text x="370" y="96" class="txt">DIV_MID (TP_DIV_PRE)</text>

  <!-- Rbot -->
  <line x1="360" y1="100" x2="360" y2="170" class="wire"/>
  <rect x="346" y="170" width="28" height="10" class="part"/>
  <text x="380" y="185" class="txt">R_BOT 1.0k</text>
  <line x1="360" y1="180" x2="360" y2="210" class="wire"/>
  <text x="340" y="226" class="txt">GND</text>

  <!-- Connection from DIV_MID to op-amp VIN+ -->
  <line x1="370" y1="100" x2="520" y2="100" class="wire"/>
  <text x="440" y="88" class="small">(optional R_IN 220Ω)</text>

  <!-- Op-amp triangle -->
  <!-- Triangle points right; base left at x=520, tip at x=700 -->
  <polygon points="520,60 520,140 700,100" stroke="#000" stroke-width="2" fill="#fff"/>
  <text x="635" y="98" class="txt">U1</text>
  <text x="550" y="78" class="txt small">+ VIN</text>
  <text x="550" y="122" class="txt small">- VIN</text>

  <!-- VIN+ input (from DIV_MID) -->
  <line x1="520" y1="100" x2="480" y2="100" class="wire"/>
  <circle cx="480" cy="100" r="3" class="node" />

  <!-- Feedback (output to - input) -->
  <line x1="700" y1="100" x2="820" y2="100" class="wire"/>
  <text x="780" y="88" class="small">OP_OUT</text>
  <line x1="820" y1="100" x2="820" y2="140" class="wire"/>
  <line x1="820" y1="140" x2="540" y2="140" class="wire"/>
  <line x1="540" y1="140" x2="520" y2="140" class="wire"/>
  <circle cx="520" cy="140" r="3" class="node"/>
  <text x="550" y="150" class="small">feedback (VIN-)</text>

  <!-- Optional R_OUT and ADC connection -->
  <line x1="820" y1="100" x2="920" y2="100" class="wire"/>
  <rect x="900" y="92" width="40" height="16" class="part"/>
  <text x="946" y="104" class="small">R_OUT 47Ω</text>
  <line x1="940" y1="100" x2="980" y2="100" class="wire"/>
  <circle cx="980" cy="100" r="4" class="node"/>
  <text x="990" y="96" class="txt">ADC_IN (Pico)</text>

  <!-- VDD and GND pins for op-amp -->
  <line x1="620" y1="30" x2="640" y2="30" class="wire"/>
  <text x="648" y="34" class="small">VDD (3.3V)</text>
  <line x1="620" y1="170" x2="640" y2="170" class="wire"/>
  <text x="648" y="174" class="small">GND</text>

  <!-- Decoupling caps -->
  <rect x="660" y="18" width="18" height="18" class="part"/>
  <text x="688" y="32" class="small">C1 100nF</text>
  <rect x="660" y="150" width="18" height="18" class="part"/>
  <text x="688" y="164" class="small">C2 1uF</text>

  <!-- BOM box -->
  <rect x="40" y="430" width="920" height="230" fill="#f6f6f6" stroke="#000"/>
  <text x="60" y="455" class="title">BOM (reference)</text>
  <text x="60" y="480" class="txt">U1 — Op-amp (rail-to-rail, 3.3V) e.g. MCP6001 (SOT-23-5) or OPA2333 (dual)</text>
  <text x="60" y="500" class="txt">C1 — 100 nF ceramic, 0805</text>
  <text x="60" y="520" class="txt">C2 — 1 µF ceramic, 0805</text>
  <text x="60" y="540" class="txt">R_OUT — 47 Ω, 0603 (optional)</text>
  <text x="60" y="560" class="txt">R_IN — 220 Ω (optional protection)</text>
  <text x="60" y="580" class="txt">TP_DIV_PRE, TP_OP_OUT — test pads (optional)</text>

  <text x="540" y="480" class="title">Notes</text>
  <text x="540" y="505" class="txt">• Place C1/C2 as close as possible to U1 VDD/GND pins.</text>
  <text x="540" y="525" class="txt">• Keep feedback and input traces short. Use TP_DIV_PRE to verify pre-buffer voltage.</text>
  <text x="540" y="545" class="txt">• If the board has an existing clamp on ADC trace, buffering prevents divider loading without rework.</text>

  <!-- Footer -->
  <text x="20" y="690" class="small">Generated for airsoft-display repo — branch: fix/adc-zero — 2025-11-03</text>
</svg>
